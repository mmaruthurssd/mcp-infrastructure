{
  "version": "2.0.0",
  "description": "Decision tree for choosing between Skills, MCP servers, subagents, or hybrid approaches",
  "questions": [
    {
      "id": "external_system",
      "question": "Does this tool interact with external systems (APIs, databases, file system, git, etc.)?",
      "help": "External systems include: REST APIs, databases (SQL/NoSQL), file operations, git commands, command-line tools, web scraping, etc.",
      "yes": "external_system_yes",
      "no": "workflow_vs_thinking"
    },
    {
      "id": "workflow_vs_thinking",
      "question": "Is this primarily workflow instructions/patterns, or specialized AI thinking?",
      "help": "Workflow instructions: step-by-step processes, formatting guidelines, code patterns, brand guidelines. AI thinking: complex reasoning, code review, debugging analysis, teaching concepts.",
      "yes_workflow": "check_executable",
      "yes_thinking": "complexity"
    },
    {
      "id": "check_executable",
      "question": "Does it need to run scripts or just provide instructions?",
      "help": "Scripts: data processing, file manipulation, automation. Instructions only: guidelines, patterns, best practices.",
      "yes": "executable_skill",
      "no": "simple_skill"
    },
    {
      "id": "complexity",
      "question": "Does this require complex multi-step reasoning or specialized domain expertise?",
      "help": "Complex reasoning includes: code review, debugging analysis, architectural decisions, teaching/education, multi-step orchestration",
      "yes": "state_management",
      "no": "simple_subagent"
    },
    {
      "id": "state_management",
      "question": "Does this need to persist state or learn patterns across Claude sessions?",
      "help": "State persistence includes: learned patterns, decision history, cached data, user preferences",
      "yes": "complex_subagent_with_state",
      "no": "check_workflow_component"
    },
    {
      "id": "check_workflow_component",
      "question": "Would it benefit from specific workflow instructions alongside the AI thinking?",
      "help": "Consider adding a Skill if you have standard procedures, templates, or patterns to follow",
      "yes": "skill_with_subagent",
      "no": "simple_subagent"
    },
    {
      "id": "external_system_yes",
      "question": "Does it need workflow instructions for how to use the external systems?",
      "help": "Consider adding a Skill if you have specific procedures, best practices, or patterns for using these systems",
      "yes": "check_teaching",
      "no": "check_teaching_mcp_only"
    },
    {
      "id": "check_teaching",
      "question": "Does the tool also need specialized AI thinking, education, or complex orchestration?",
      "help": "Consider adding a subagent if you need: teaching users, providing guidance, orchestrating complex workflows, separate context management",
      "yes": "skill_mcp_subagent",
      "no": "skill_with_mcp"
    },
    {
      "id": "check_teaching_mcp_only",
      "question": "Does the tool need specialized AI thinking, education, or complex orchestration?",
      "help": "Consider adding a subagent if you need: teaching users, providing guidance, orchestrating complex workflows",
      "yes": "hybrid_mcp_subagent",
      "no": "check_state"
    },
    {
      "id": "check_state",
      "question": "Does it need to learn patterns or persist state across sessions?",
      "help": "Learning includes: remembering user decisions, adapting behavior, building institutional knowledge",
      "yes": "mcp_server_with_learning",
      "no": "simple_mcp_server"
    }
  ],
  "outcomes": {
    "simple_skill": {
      "recommendation": "Skill Only",
      "confidence": "high",
      "rationale": "This is primarily workflow instructions or patterns without AI behavior customization or external system access. A Skill is the most efficient choice - ultra-lightweight and auto-loaded when relevant.",
      "benefits": [
        "Extremely simple (just a SKILL.md file with YAML frontmatter)",
        "Ultra-lightweight (dozens of tokens vs thousands)",
        "Auto-discovery (Claude loads it only when relevant)",
        "Portable (works across Claude apps, Code, and API)",
        "No server or complex setup required"
      ],
      "considerations": [
        "Best for instructions/workflows, not complex AI behavior",
        "Cannot access external systems directly",
        "No state persistence (stateless instructions)",
        "Limited to what Claude can do with instructions alone"
      ],
      "template": "basic-skill",
      "examples": [
        "Brand guidelines (formatting, colors, tone)",
        "Code style patterns (naming conventions, file structure)",
        "Document templates (resume format, report structure)",
        "Data processing workflows (CSV transformation steps)"
      ]
    },
    "executable_skill": {
      "recommendation": "Executable Skill",
      "confidence": "high",
      "rationale": "This needs to run scripts for automation but doesn't require external system integration or complex AI behavior. An executable Skill provides lightweight automation.",
      "benefits": [
        "Can include executable scripts alongside instructions",
        "Still ultra-lightweight (loaded only when needed)",
        "Simple automation without MCP server complexity",
        "Portable and reusable"
      ],
      "considerations": [
        "Scripts run in Claude's execution environment",
        "Not suitable for external API integration",
        "No state persistence across sessions",
        "Best for simple automation tasks"
      ],
      "template": "executable-skill",
      "examples": [
        "Data transformation (process CSV/JSON with scripts)",
        "File cleanup (organize/rename files with patterns)",
        "Code generation (create files from templates)",
        "Report generation (generate PDFs from data)"
      ]
    },
    "skill_with_subagent": {
      "recommendation": "Skill + Subagent",
      "confidence": "high",
      "rationale": "This needs both workflow instructions (Skill) AND specialized AI thinking/behavior (Subagent). The Skill provides repeatable patterns while the Subagent adds intelligence.",
      "benefits": [
        "Skill provides consistent workflows/patterns",
        "Subagent adds specialized AI reasoning",
        "Token-efficient hybrid approach",
        "Separate concerns (instructions vs behavior)"
      ],
      "considerations": [
        "Two components to maintain",
        "Subagent needs to know when to use the Skill",
        "No external system access (consider MCP if needed)"
      ],
      "template": "skill-subagent-hybrid",
      "examples": [
        "Code review with company standards (Skill: standards, Subagent: analysis)",
        "Writing assistant with brand voice (Skill: guidelines, Subagent: editing)",
        "Architecture reviewer (Skill: patterns, Subagent: evaluation)"
      ]
    },
    "skill_with_mcp": {
      "recommendation": "Skill + MCP Server",
      "confidence": "high",
      "rationale": "This needs external system access (MCP) WITH specific workflow instructions (Skill). The MCP provides capabilities while the Skill provides procedural guidance.",
      "benefits": [
        "MCP handles external system integration",
        "Skill provides best practices for using those systems",
        "Token-efficient (Skill only loads when relevant)",
        "Separation of capabilities and workflows"
      ],
      "considerations": [
        "Two components to maintain",
        "MCP requires more setup than Skill",
        "Consider adding Subagent if teaching/guidance needed"
      ],
      "template": "skill-mcp-hybrid",
      "examples": [
        "Git operations with workflow (MCP: git commands, Skill: git best practices)",
        "API client with patterns (MCP: API calls, Skill: usage patterns)",
        "Database tool with queries (MCP: DB access, Skill: SQL patterns)"
      ]
    },
    "skill_mcp_subagent": {
      "recommendation": "Skill + MCP Server + Subagent (Full Hybrid)",
      "confidence": "medium",
      "rationale": "This is a complex tool needing external access (MCP), workflow instructions (Skill), AND specialized AI guidance (Subagent). Most powerful but most complex.",
      "benefits": [
        "Best of all worlds",
        "MCP: External capabilities",
        "Skill: Workflow patterns (token-efficient)",
        "Subagent: Intelligent orchestration and teaching",
        "Highly sophisticated tool capabilities"
      ],
      "considerations": [
        "Most complex setup (three components)",
        "Requires careful orchestration",
        "Only worth it for sophisticated tools",
        "Consider starting simpler and upgrading"
      ],
      "template": "full-hybrid",
      "examples": [
        "Advanced deployment tool (MCP: cloud APIs, Skill: deployment procedures, Subagent: strategy guidance)",
        "Code quality system (MCP: linters/tests, Skill: code standards, Subagent: review guidance)",
        "Data pipeline orchestrator (MCP: data systems, Skill: ETL patterns, Subagent: optimization advice)"
      ],
      "upgrade_path": "Consider starting with Skill + MCP, then adding Subagent if teaching/guidance becomes important"
    },
    "simple_subagent": {
      "recommendation": "Subagent Only",
      "confidence": "high",
      "rationale": "This appears to be specialized AI thinking/behavior without external dependencies or workflow instructions. A subagent with a custom system prompt is the right choice.",
      "benefits": [
        "Simple setup (just a markdown file)",
        "No external dependencies",
        "Easy to modify and iterate",
        "Separate context for focused thinking"
      ],
      "considerations": [
        "Cannot persist state across sessions",
        "Cannot access external systems",
        "Relies on Claude's built-in tools (Read, Write, Bash, etc.)"
      ],
      "template": "basic-subagent",
      "examples": [
        "Code reviewer (reads code, provides feedback)",
        "Writing assistant (specialized style guidance)",
        "Debugging coach (teaches debugging strategies)"
      ],
      "note": "If you have standard patterns/workflows to follow, consider adding a Skill for efficiency"
    },
    "simple_mcp_server": {
      "recommendation": "MCP Server Only",
      "confidence": "high",
      "rationale": "This requires external system access but doesn't need specialized AI behavior. An MCP server provides the necessary capabilities.",
      "benefits": [
        "Access to external systems/APIs",
        "Reusable across different AI clients",
        "Well-defined tool interface",
        "Can be language-agnostic"
      ],
      "considerations": [
        "Requires more setup than subagent",
        "Need to maintain server code",
        "Could benefit from subagent for guidance later"
      ],
      "template": "basic-mcp-server",
      "examples": [
        "Database query tool (connects to PostgreSQL)",
        "API client (calls external REST API)",
        "System monitoring (reads system metrics)"
      ]
    },
    "mcp_server_with_learning": {
      "recommendation": "MCP Server with Learning Engine",
      "confidence": "high",
      "rationale": "This needs external access AND state persistence. An MCP server with continuous learning is ideal. Consider adding a subagent later for enhanced UX.",
      "benefits": [
        "External system access",
        "Learns from user decisions",
        "Improves over time",
        "State persists across sessions"
      ],
      "considerations": [
        "More complex than simple MCP server",
        "Need to implement learning engine",
        "Could benefit from subagent for teaching/guidance"
      ],
      "template": "mcp-server-with-learning",
      "examples": [
        "Smart API client (learns common queries)",
        "Deployment tool (remembers deployment patterns)",
        "Test runner (learns which tests to run)"
      ],
      "enhancement": "Consider adding a subagent to provide educational guidance while using these tools"
    },
    "complex_subagent_with_state": {
      "recommendation": "Subagent + Simple State Management",
      "confidence": "medium",
      "rationale": "This needs complex reasoning AND state, but no external systems. Use a subagent with Claude's built-in tools for simple persistence (Write tool to save JSON).",
      "benefits": [
        "Specialized thinking with custom prompts",
        "Can save state using Write tool",
        "Simpler than full MCP server",
        "Good for project-specific knowledge"
      ],
      "considerations": [
        "State management is manual (JSON files)",
        "Not as robust as MCP learning engine",
        "Might outgrow this approach if needs become complex"
      ],
      "template": "subagent-with-state",
      "examples": [
        "Project knowledge manager (learns project conventions)",
        "Code style enforcer (remembers style decisions)",
        "Task tracker (maintains TODO list)"
      ],
      "upgrade_path": "If state management becomes complex, consider migrating to MCP server with learning engine"
    },
    "hybrid_mcp_subagent": {
      "recommendation": "Both (MCP Server + Subagent)",
      "confidence": "high",
      "rationale": "This needs BOTH external capabilities AND specialized AI guidance. The MCP server provides tools/data, while the subagent orchestrates and educates.",
      "benefits": [
        "Best of both worlds",
        "MCP handles external access",
        "Subagent provides intelligent orchestration",
        "Separate context for complex workflows",
        "Educational experience for users"
      ],
      "considerations": [
        "Most complex setup",
        "Two components to maintain",
        "Worth it for sophisticated tools"
      ],
      "template": "hybrid-mcp-subagent",
      "examples": [
        "File organizer (MCP: file ops + learning, Subagent: guidance)",
        "Git assistant (MCP: git tools, Subagent: best practices)",
        "Deployment orchestrator (MCP: deploy commands, Subagent: strategy)"
      ],
      "architecture": {
        "mcp_server": "Provides tools for external operations and state management",
        "subagent": "Uses MCP tools + built-in tools, provides guidance and education",
        "interaction": "Subagent calls MCP tools as needed while teaching best practices"
      }
    }
  },
  "fallbacks": {
    "unsure": {
      "recommendation": "Start with Subagent, Upgrade if Needed",
      "confidence": "low",
      "rationale": "When in doubt, start simple. Begin with a subagent, then add MCP capabilities if you discover external access needs.",
      "guidance": "Build a subagent first. If you find yourself needing external APIs, persistent state, or complex capabilities, then build an MCP server.",
      "examples": [
        "Start: Subagent for code review",
        "Upgrade: Add MCP server when you need to integrate with GitHub API",
        "Result: Hybrid system with best of both"
      ]
    }
  },
  "meta": {
    "last_updated": "2025-10-20",
    "version_notes": "v2.0.0: Added Claude Skills as first-class architecture option. Now supports: Skills (workflow instructions), MCP servers (external systems), Subagents (AI behavior), and all hybrid combinations. Skills provide ultra-lightweight token-efficient alternative for workflow/pattern-based tools."
  }
}
