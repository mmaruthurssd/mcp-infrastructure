{
  "step": "specification",
  "scenario": "existing-project",
  "questions": [
    {
      "id": "feature_name",
      "type": "text",
      "question": "What feature are you adding to this existing project?",
      "hint": "e.g., 'Email Notifications', 'Advanced Search', 'Export to PDF'",
      "required": true,
      "variable": "FEATURE_NAME"
    },
    {
      "id": "problem_statement",
      "type": "text",
      "question": "What problem does this new feature solve?",
      "hint": "What's the current pain point or limitation?",
      "required": true,
      "variable": "PROBLEM_STATEMENT"
    },
    {
      "id": "proposed_solution",
      "type": "text",
      "question": "What is the high-level solution? (WHAT, not HOW)",
      "required": true,
      "variable": "PROPOSED_SOLUTION"
    },
    {
      "id": "existing_code_impact",
      "type": "text",
      "question": "How will this feature interact with the existing codebase?",
      "hint": "Will it modify existing code, add new modules, integrate with current features?",
      "required": true,
      "variable": "EXISTING_CODE_IMPACT"
    },
    {
      "id": "primary_users",
      "type": "text",
      "question": "Who are the primary users for this new feature?",
      "hint": "Can be same as existing users or new user types",
      "required": true,
      "variable": "PRIMARY_USERS"
    },
    {
      "id": "success_criteria",
      "type": "text",
      "question": "How will you measure success for this feature?",
      "hint": "Measurable outcomes",
      "required": true,
      "variable": "SUCCESS_CRITERIA"
    },
    {
      "id": "user_stories_count",
      "type": "number",
      "question": "How many main user stories for this feature?",
      "default": 3,
      "min": 1,
      "max": 15,
      "required": true,
      "variable": "USER_STORIES_COUNT"
    },
    {
      "id": "ui_requirements",
      "type": "text",
      "question": "Describe UI requirements (or 'Reuse existing UI')",
      "required": false,
      "variable": "UI_REQUIREMENTS"
    },
    {
      "id": "data_requirements",
      "type": "text",
      "question": "What data will this feature work with?",
      "hint": "New data, existing data, or both?",
      "required": true,
      "variable": "DATA_REQUIREMENTS"
    },
    {
      "id": "backward_compatibility",
      "type": "text",
      "question": "What are the backward compatibility requirements?",
      "hint": "e.g., 'Must not break existing workflows', 'Existing data must migrate automatically'",
      "required": true,
      "variable": "BACKWARD_COMPATIBILITY"
    },
    {
      "id": "migration_needed",
      "type": "boolean",
      "question": "Does this feature require data migration?",
      "default": false,
      "required": true,
      "variable": "MIGRATION_NEEDED"
    },
    {
      "id": "migration_details",
      "type": "text",
      "question": "Describe the migration requirements",
      "condition": {
        "field": "migration_needed",
        "equals": true
      },
      "required": true,
      "variable": "MIGRATION_DETAILS"
    }
  ],
  "follow_up_questions": {
    "user_stories": {
      "question_template": "Describe user story {{number}}:",
      "fields": [
        {
          "id": "persona",
          "question": "As a... (who is the user?)",
          "required": true
        },
        {
          "id": "want",
          "question": "I want... (what do they want to do?)",
          "required": true
        },
        {
          "id": "benefit",
          "question": "So that... (why? what's the benefit?)",
          "required": true
        },
        {
          "id": "acceptance_criteria",
          "question": "What are the acceptance criteria? (separate with semicolons)",
          "required": true
        }
      ]
    }
  }
}
